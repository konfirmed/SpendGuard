(()=>{"use strict";chrome.runtime.onInstalled.addListener((()=>{console.log("WebAssistant extension installed"),chrome.storage.local.set({purchases:[],totalIntercepts:0,settings:{cooldownSeconds:30,enableNudges:!0,enableScamDetection:!0}})})),chrome.runtime.onMessage.addListener(((e,t,s)=>"incrementIntercepts"===e.action?(chrome.storage.local.get(["totalIntercepts"],(e=>{const t=(e.totalIntercepts||0)+1;chrome.storage.local.set({totalIntercepts:t}),s({success:!0,newCount:t})})),!0):"addPurchase"===e.action?(chrome.storage.local.get(["purchases"],(t=>{const o=t.purchases||[],a={...e.purchase,id:Date.now().toString()};o.unshift(a),o.length>100&&o.splice(100),chrome.storage.local.set({purchases:o}),s({success:!0})})),!0):void 0)),chrome.runtime.onUpdateAvailable.addListener((()=>{console.log("WebAssistant update available")}))})();