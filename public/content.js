(()=>{"use strict";var e,t,n={},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return n[e](i,i.exports,r),i.exports}r.m=n,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>e+".js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="spendguard-lightweight:",r.l=(n,o,i,a)=>{if(e[n])e[n].push(o);else{var s,d;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+i){s=u;break}}s||(d=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+i),s.src=n),e[n]=[o];var m=(t,o)=>{s.onerror=s.onload=null,clearTimeout(g);var r=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(o))),t)return t(o)},g=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),d&&document.head.appendChild(s)}},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={854:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=i);var a=r.p+r.u(t),s=new Error;r.l(a,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var o,i,[a,s,d]=n,c=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);d&&d(r)}for(t&&t(n);c<a.length;c++)i=a[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkspendguard_lightweight=self.webpackChunkspendguard_lightweight||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();const i=new class{constructor(){this.cooldownActive=!1,this.interceptedButtons=new Set,this.eventListeners=new Map,this.observer=null,this.processedButtons=new WeakSet}init(){this.scanForCheckoutButtons(),this.observeChanges(),this.setupSavingsDisplay()}observeChanges(){this.observer=new MutationObserver((()=>{this.cooldownActive||this.scanForCheckoutButtons()})),this.observer.observe(document.body,{childList:!0,subtree:!0})}scanForCheckoutButtons(){this.isExcludedSite()||document.querySelectorAll([".checkout-button",".buy-button",".purchase-button",".add-to-cart",".cart-button",".proceed-button",'[data-testid*="checkout"]','[data-testid*="buy"]','[data-testid*="purchase"]','[data-testid*="add-to-cart"]',".single_add_to_cart_button","#buy-now-button",".shopify-payment-button",".SubmitButton",".paypal-button",'button[type="submit"]','input[type="submit"]'].join(",")).forEach((e=>{this.interceptedButtons.has(e)||this.processedButtons.has(e)||!this.isPurchaseButton(e)||(this.interceptedButtons.add(e),this.processedButtons.add(e),this.addInterception(e))}))}isPurchaseButton(e){if(this.isExcludedSite())return!1;const t=(e.textContent||"").toLowerCase(),n=e.getAttribute("aria-label")?.toLowerCase()||"",o=e.className.toLowerCase(),r=e.id.toLowerCase(),i=["buy","purchase","checkout","order","pay","complete","add to cart","proceed","continue","place order","submit order"].some((e=>t.includes(e)||n.includes(e)||o.includes(e))),a=["cancel","back","return","edit","remove","delete","merge","commit","push","pull","fork","clone","create","new","save","update","submit pull","submit issue"].some((e=>t.includes(e)||n.includes(e)||o.includes(e)||r.includes(e))),s=this.isLikelyEcommercePage();return i&&!a&&s}isExcludedSite(){const e=window.location.hostname.toLowerCase();return["github.com","gitlab.com","bitbucket.org","stackoverflow.com","stackexchange.com","reddit.com","twitter.com","x.com","facebook.com","instagram.com","linkedin.com","youtube.com","google.com","microsoft.com","apple.com","developer.mozilla.org","docs.google.com","notion.so","slack.com","discord.com","zoom.us"].some((t=>e.includes(t)))}isLikelyEcommercePage(){const e=window.location.href.toLowerCase(),t=window.location.hostname.toLowerCase(),n=["/checkout","/cart","/buy","/purchase","/order","/payment","shop","store","market","commerce","retail"].some((n=>e.includes(n)||t.includes(n))),o=null!==document.querySelector(".price, .product-price, .amount, [data-price]"),r=null!==document.querySelector(".cart, .shopping-cart, .basket");return n||o||r}addInterception(e){const t=async t=>{t.preventDefault(),t.stopPropagation();const n=await this.getSettings(),o=this.extractSimpleContext();await this.recordIntercept(o),this.showCooldown(n.cooldownSeconds,(()=>{this.proceedWithClick(e)}))};this.eventListeners.set(e,t),e.addEventListener("click",t,!0)}extractSimpleContext(){const e={},t=["h1",".product-title",".product-name","#productTitle"];for(const n of t){const t=document.querySelector(n);if(t?.textContent?.trim()){e.productName=t.textContent.trim();break}}const n=[".price",".product-price",".amount","[data-price]"];for(const t of n){const n=document.querySelector(t);if(n?.textContent?.trim()){const t=n.textContent.match(/[\$€£¥]?\s*(\d+(?:,\d{3})*(?:\.\d{2})?)/);if(t){e.priceText=n.textContent.trim(),e.price=parseFloat(t[1].replace(/,/g,""));break}}}return e}extractEnhancedContext(){const e=this.extractSimpleContext(),t=[".breadcrumb",".category-nav","[data-category]"];for(const n of t){const t=document.querySelector(n);if(t?.textContent?.trim()){e.category=t.textContent.trim().split(" > ").pop();break}}if(!e.category){const t=window.location.pathname.toLowerCase(),n=["electronics","clothing","books","home","garden","sports","beauty","health","toys","automotive","food","jewelry"];for(const o of n)if(t.includes(o)){e.category=o.charAt(0).toUpperCase()+o.slice(1);break}}return e}async getPersonalizedNudge(e){try{const{getGPTNudge:t}=await r.e(928).then(r.bind(r,928)),n=`Product: ${e.productName||"Unknown"}, Price: ${e.priceText||"Unknown"}, Category: ${e.category||"Unknown"}, URL: ${window.location.href}`;return await t(n)}catch(t){return console.warn("SpendGuard: Failed to get AI nudge, using fallback",t),e.price&&e.price>100?`This $${e.price} purchase is significant. Have you compared prices elsewhere?`:"Electronics"===e.category?"Tech purchases often have newer models coming soon. Research timing?":e.productName?`Before buying "${e.productName}", ask yourself: Do I need this, or do I just want it?`:"Before completing this purchase, let's pause and reflect. Is this something you really need right now?"}}async analyzeSpendingContext(e,t){try{const{SpendingAnalytics:n}=await r.e(81).then(r.bind(r,81));return await n.analyzeCurrentPurchase(e,t)}catch(e){return console.warn("SpendGuard: Failed to analyze spending context, using defaults",e),{shouldIncreaseDelay:!1,customMessage:"Take a moment to consider this purchase.",insights:[]}}}async showCooldown(e,t){this.cooldownActive=!0;const n=this.extractEnhancedContext(),o=await this.getSettings(),r=await this.getPersonalizedNudge(n),i=await this.analyzeSpendingContext(n,o),a=document.createElement("div");a.id="spendguard-cooldown-overlay",a.innerHTML=`\n      <div style="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        background: rgba(0, 0, 0, 0.8);\n        z-index: 999999;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      ">\n        <div style="\n          background: white;\n          border-radius: 12px;\n          padding: 2rem;\n          max-width: 420px;\n          width: 90%;\n          text-align: center;\n          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n        ">\n          <div style="\n            width: 48px;\n            height: 48px;\n            background: ${i.shouldIncreaseDelay?"#fecaca":"#dbeafe"};\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            margin: 0 auto 1.5rem auto;\n          ">\n            <svg width="24" height="24" fill="${i.shouldIncreaseDelay?"#dc2626":"#2563eb"}" viewBox="0 0 24 24">\n              ${i.shouldIncreaseDelay?'<path d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>':'<path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>'}\n            </svg>\n          </div>\n          \n          <h2 style="margin: 0 0 0.5rem 0; font-size: 1.5rem; font-weight: 700; color: #111827;">\n            ${i.shouldIncreaseDelay?"Hold On!":"Take a Moment"}\n          </h2>\n          \n          <p style="margin: 0 0 1.5rem 0; color: #6b7280; line-height: 1.5;">\n            ${r}\n          </p>\n          \n          ${i.budgetAlert?`\n            <div style="\n              background: ${"danger"===i.budgetAlert.type?"#fef2f2":"#fff3cd"};\n              border: 1px solid ${"danger"===i.budgetAlert.type?"#fecaca":"#ffeaa7"};\n              border-radius: 8px;\n              padding: 0.75rem;\n              margin-bottom: 1rem;\n              font-size: 0.875rem;\n              color: ${"danger"===i.budgetAlert.type?"#dc2626":"#d97706"};\n            ">\n              💰 ${i.budgetAlert.message}\n            </div>\n          `:""}\n          \n          ${n.productName?`\n            <div style="\n              background: #f8fafc;\n              border-radius: 8px;\n              padding: 0.75rem;\n              margin-bottom: 1.5rem;\n              text-align: left;\n            ">\n              <div style="font-size: 0.875rem; color: #64748b; margin-bottom: 0.25rem;">Item:</div>\n              <div style="font-weight: 600; color: #1e293b;">${n.productName}</div>\n              ${n.priceText?`<div style="font-size: 0.875rem; color: #64748b; margin-top: 0.25rem;">${n.priceText}</div>`:""}\n            </div>\n          `:""}\n          \n          <div style="margin-bottom: 1.5rem;">\n            <div id="countdown" style="\n              font-size: 3rem;\n              font-weight: 700;\n              color: #2563eb;\n              font-family: ui-monospace, SFMono-Regular, monospace;\n              margin-bottom: 0.75rem;\n            ">${e}</div>\n            \n            <div style="\n              width: 100%;\n              height: 8px;\n              background: #e5e7eb;\n              border-radius: 4px;\n              overflow: hidden;\n            ">\n              <div id="progress-bar" style="\n                height: 100%;\n                background: #2563eb;\n                width: 0%;\n                transition: width 1s linear;\n                border-radius: 4px;\n              "></div>\n            </div>\n          </div>\n          \n          <div style="\n            background: #f3f4f6;\n            padding: 1rem;\n            border-radius: 8px;\n            margin-bottom: 1.5rem;\n            text-align: left;\n          ">\n            <p style="margin: 0 0 0.5rem 0; font-weight: 600; color: #374151; font-size: 0.875rem;">\n              Consider:\n            </p>\n            <ul style="margin: 0; padding-left: 1rem; color: #6b7280; font-size: 0.875rem; line-height: 1.4;">\n              <li>Do I have a specific need for this item?</li>\n              <li>Can I wait 24 hours to decide?</li>\n              <li>Is this within my budget?</li>\n              <li>Have I compared alternatives?</li>\n            </ul>\n          </div>\n          \n          <div style="display: flex; gap: 0.75rem; flex-direction: column;">\n            <button id="skip-btn" style="\n              background: #d1d5db;\n              color: #374151;\n              border: none;\n              padding: 0.75rem 1rem;\n              border-radius: 6px;\n              font-weight: 500;\n              cursor: pointer;\n              transition: background-color 0.2s;\n              display: none;\n            ">\n              Proceed Anyway\n            </button>\n            \n            <button id="wait-btn" style="\n              background: #059669;\n              color: white;\n              border: none;\n              padding: 0.75rem 1rem;\n              border-radius: 6px;\n              font-weight: 500;\n              cursor: pointer;\n              transition: background-color 0.2s;\n            ">\n              Take More Time to Decide\n            </button>\n          </div>\n          \n          <p style="margin: 1rem 0 0 0; color: #9ca3af; font-size: 0.75rem;">\n            This pause is brought to you by SpendGuard\n          </p>\n        </div>\n      </div>\n    `,document.body.appendChild(a);const s=a.querySelector("#countdown"),d=a.querySelector("#progress-bar"),c=a.querySelector("#skip-btn"),l=a.querySelector("#wait-btn");let u=e,m=!1;setTimeout((()=>{m=!0,c.style.display="block"}),Math.min(5e3,1e3*e));const g=setInterval((()=>{u--,s.textContent=this.formatTime(u);const t=(e-u)/e*100;d.style.width=`${t}%`,u<=0&&(clearInterval(g),c.textContent="Continue Purchase",c.style.background="#059669",c.style.color="white")}),1e3);c.addEventListener("click",(()=>{(u<=0||m)&&(this.removeCooldown(a),t())})),l.addEventListener("click",(()=>{this.removeCooldown(a)})),c.addEventListener("mouseenter",(()=>{c.style.background=u<=0?"#047857":"#9ca3af"})),c.addEventListener("mouseleave",(()=>{c.style.background=u<=0?"#059669":"#d1d5db"})),l.addEventListener("mouseenter",(()=>{l.style.background="#047857"})),l.addEventListener("mouseleave",(()=>{l.style.background="#059669"}))}formatTime(e){if(e<=0)return"0:00";const t=Math.floor(e/60),n=e%60;return t>0?`${t}:${n.toString().padStart(2,"0")}`:n.toString()}removeCooldown(e){e.style.opacity="0",e.style.transition="opacity 0.3s ease",setTimeout((()=>{e.remove(),this.cooldownActive=!1}),300)}proceedWithClick(e){this.recordProceed(),this.interceptedButtons.delete(e),this.processedButtons.add(e);const t=this.eventListeners.get(e);t&&(e.removeEventListener("click",t,!0),this.eventListeners.delete(e)),["pointerdown","mousedown","mouseup","click"].forEach((t=>{const n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(n)}));const n=e.closest("form");n&&"submit"===e.type&&setTimeout((()=>{try{n.submit()}catch(e){console.warn("SpendGuard: Could not submit form",e)}}),100)}async getSettings(){return new Promise((e=>{try{chrome.runtime.sendMessage({action:"getSettings"},(t=>{if(chrome.runtime.lastError)return console.warn("SpendGuard: Error getting settings:",chrome.runtime.lastError),void e({cooldownSeconds:30,enableNudges:!0,enableScamDetection:!0});e(t?.settings||{cooldownSeconds:30,enableNudges:!0,enableScamDetection:!0})}))}catch(t){console.warn("SpendGuard: Failed to get settings:",t),e({cooldownSeconds:30,enableNudges:!0,enableScamDetection:!0})}}))}async recordIntercept(e){try{chrome.runtime.sendMessage({action:"addPurchase",purchase:{url:window.location.href,timestamp:Date.now(),intercepted:!0,proceeded:!1,amount:e.price}}),chrome.runtime.sendMessage({action:"incrementIntercepts"}),e.price&&await this.recordSavings(e)}catch(e){console.warn("SpendGuard: Failed to record intercept:",e)}}recordProceed(){try{chrome.runtime.sendMessage({action:"addPurchase",purchase:{url:window.location.href,timestamp:Date.now(),intercepted:!0,proceeded:!0}})}catch(e){console.warn("SpendGuard: Failed to record proceed:",e)}}async recordSavings(e){if(!e.price)return;const t=await this.getSavingsData(),n=Date.now(),o=new Date(n).toISOString().slice(0,7);t.totalSaved+=e.price,t.interceptsCount+=1,t.lastInterceptDate=n,e.category&&(t.categorySavings[e.category]=(t.categorySavings[e.category]||0)+e.price),t.monthlySavings[o]=(t.monthlySavings[o]||0)+e.price,e.price>t.biggestSave.amount&&(t.biggestSave={amount:e.price,productName:e.productName,date:n}),await this.saveSavingsData(t),this.showSavingsNotification(e.price,t.totalSaved)}async getSavingsData(){return new Promise((e=>{try{chrome.storage.local.get(["spendguardSavings"],(t=>{if(chrome.runtime.lastError)return console.warn("SpendGuard: Error getting savings data:",chrome.runtime.lastError),void e(this.getDefaultSavingsData());e(t.spendguardSavings||this.getDefaultSavingsData())}))}catch(t){console.warn("SpendGuard: Failed to get savings data:",t),e(this.getDefaultSavingsData())}}))}async saveSavingsData(e){return new Promise((t=>{try{chrome.storage.local.set({spendguardSavings:e},(()=>{chrome.runtime.lastError&&console.warn("SpendGuard: Error saving savings data:",chrome.runtime.lastError),t()}))}catch(e){console.warn("SpendGuard: Failed to save savings data:",e),t()}}))}getDefaultSavingsData(){return{totalSaved:0,interceptsCount:0,proceededCount:0,lastInterceptDate:0,categorySavings:{},monthlySavings:{},biggestSave:{amount:0,date:0}}}showSavingsNotification(e,t){const n=document.createElement("div");n.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: linear-gradient(135deg, #10b981, #059669);\n      color: white;\n      padding: 1rem 1.5rem;\n      border-radius: 12px;\n      box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);\n      z-index: 999998;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      font-size: 0.875rem;\n      max-width: 300px;\n      transform: translateX(400px);\n      transition: transform 0.3s ease;\n    ",n.innerHTML=`\n      <div style="display: flex; align-items: center; gap: 0.5rem;">\n        <div style="\n          width: 24px;\n          height: 24px;\n          background: rgba(255, 255, 255, 0.2);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        ">\n          💰\n        </div>\n        <div>\n          <div style="font-weight: 600;">Saved $${e.toFixed(2)}!</div>\n          <div style="opacity: 0.9; font-size: 0.75rem;">Total saved: $${t.toFixed(2)}</div>\n        </div>\n      </div>\n    `,document.body.appendChild(n),setTimeout((()=>{n.style.transform="translateX(0)"}),100),setTimeout((()=>{n.style.transform="translateX(400px)",setTimeout((()=>{n.parentNode&&n.remove()}),300)}),4e3)}async setupSavingsDisplay(){if(!this.shouldShowSavingsDisplay())return;const e=await this.getSavingsData();e.totalSaved<=0||this.createSavingsWidget(e)}shouldShowSavingsDisplay(){const e=window.location.href.toLowerCase(),t=window.location.hostname.toLowerCase();return["/cart","/checkout","/buy","/purchase","/product","shop","store"].some((n=>e.includes(n)||t.includes(n)))}createSavingsWidget(e){if(document.getElementById("spendguard-savings-widget"))return;const t=document.createElement("div");t.id="spendguard-savings-widget",t.style.cssText="\n      position: fixed;\n      bottom: 20px;\n      left: 20px;\n      background: white;\n      border: 2px solid #10b981;\n      border-radius: 12px;\n      padding: 1rem;\n      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n      z-index: 999997;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      font-size: 0.875rem;\n      max-width: 280px;\n      cursor: pointer;\n      transition: transform 0.2s ease;\n    ";const n=(new Date).toISOString().slice(0,7),o=e.monthlySavings[n]||0;t.innerHTML=`\n      <div style="display: flex; align-items: center; gap: 0.75rem;">\n        <div style="\n          width: 40px;\n          height: 40px;\n          background: linear-gradient(135deg, #10b981, #059669);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 1.25rem;\n        ">\n          💰\n        </div>\n        <div>\n          <div style="font-weight: 700; color: #065f46; font-size: 1rem;">\n            $${e.totalSaved.toFixed(2)} Saved\n          </div>\n          <div style="color: #6b7280; font-size: 0.75rem;">\n            ${e.interceptsCount} purchases prevented\n          </div>\n          ${o>0?`\n            <div style="color: #059669; font-size: 0.75rem; font-weight: 500;">\n              $${o.toFixed(2)} this month\n            </div>\n          `:""}\n        </div>\n      </div>\n    `,t.addEventListener("mouseenter",(()=>{t.style.transform="scale(1.05)"})),t.addEventListener("mouseleave",(()=>{t.style.transform="scale(1)"})),t.addEventListener("click",(()=>{this.showDetailedSavings(e)})),document.body.appendChild(t)}showDetailedSavings(e){const t=document.getElementById("spendguard-savings-modal");t&&t.remove();const n=document.createElement("div");n.id="spendguard-savings-modal",n.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      background: rgba(0, 0, 0, 0.8);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    ";const o=Object.entries(e.monthlySavings).sort((([e],[t])=>t.localeCompare(e))).slice(0,6),r=Object.entries(e.categorySavings).sort((([,e],[,t])=>t-e)).slice(0,5);n.innerHTML=`\n      <div style="\n        background: white;\n        border-radius: 16px;\n        padding: 2rem;\n        max-width: 500px;\n        width: 90%;\n        max-height: 80vh;\n        overflow-y: auto;\n        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n      ">\n        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">\n          <h2 style="margin: 0; font-size: 1.5rem; font-weight: 700; color: #065f46;">\n            💰 Your Savings Report\n          </h2>\n          <button id="close-savings" style="\n            background: none;\n            border: none;\n            font-size: 1.5rem;\n            cursor: pointer;\n            color: #6b7280;\n            padding: 0.25rem;\n          ">×</button>\n        </div>\n\n        <div style="\n          background: linear-gradient(135deg, #ecfdf5, #d1fae5);\n          border-radius: 12px;\n          padding: 1.5rem;\n          text-align: center;\n          margin-bottom: 1.5rem;\n        ">\n          <div style="font-size: 2.5rem; font-weight: 800; color: #065f46; margin-bottom: 0.5rem;">\n            $${e.totalSaved.toFixed(2)}\n          </div>\n          <div style="color: #059669; font-weight: 600;">Total Money Saved</div>\n          <div style="color: #6b7280; font-size: 0.875rem; margin-top: 0.5rem;">\n            From ${e.interceptsCount} prevented purchases\n          </div>\n        </div>\n\n        ${e.biggestSave.amount>0?`\n          <div style="\n            background: #fff7ed;\n            border: 1px solid #fed7aa;\n            border-radius: 8px;\n            padding: 1rem;\n            margin-bottom: 1.5rem;\n          ">\n            <div style="font-weight: 600; color: #9a3412; margin-bottom: 0.25rem;">\n              🏆 Biggest Save\n            </div>\n            <div style="color: #ea580c; font-weight: 700;">\n              $${e.biggestSave.amount.toFixed(2)}\n            </div>\n            ${e.biggestSave.productName?`\n              <div style="color: #7c2d12; font-size: 0.875rem;">\n                ${e.biggestSave.productName}\n              </div>\n            `:""}\n          </div>\n        `:""}\n\n        ${o.length>0?`\n          <div style="margin-bottom: 1.5rem;">\n            <h3 style="margin: 0 0 1rem 0; font-size: 1rem; font-weight: 600; color: #374151;">\n              📅 Monthly Breakdown\n            </h3>\n            ${o.map((([e,t])=>`\n              <div style="\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 0.5rem 0;\n                border-bottom: 1px solid #f3f4f6;\n              ">\n                <span style="color: #6b7280;">${new Date(e+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}</span>\n                <span style="font-weight: 600; color: #059669;">$${t.toFixed(2)}</span>\n              </div>\n            `)).join("")}\n          </div>\n        `:""}\n\n        ${r.length>0?`\n          <div style="margin-bottom: 1.5rem;">\n            <h3 style="margin: 0 0 1rem 0; font-size: 1rem; font-weight: 600; color: #374151;">\n              🏷️ Savings by Category\n            </h3>\n            ${r.map((([e,t])=>`\n              <div style="\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 0.5rem 0;\n                border-bottom: 1px solid #f3f4f6;\n              ">\n                <span style="color: #6b7280;">${e}</span>\n                <span style="font-weight: 600; color: #059669;">$${t.toFixed(2)}</span>\n              </div>\n            `)).join("")}\n          </div>\n        `:""}\n\n        <div style="\n          background: #f8fafc;\n          border-radius: 8px;\n          padding: 1rem;\n          text-align: center;\n        ">\n          <div style="color: #64748b; font-size: 0.875rem; line-height: 1.4;">\n            🎯 <strong>Keep it up!</strong> Every prevented purchase is money in your pocket.\n            <br>SpendGuard is helping you build better spending habits.\n          </div>\n        </div>\n      </div>\n    `,document.body.appendChild(n);const i=n.querySelector("#close-savings");i?.addEventListener("click",(()=>n.remove())),n.addEventListener("click",(e=>{e.target===n&&n.remove()}))}};i.init(),window.addEventListener("beforeunload",(()=>{if(i){for(const[e,t]of i.eventListeners)e.removeEventListener("click",t,!0);i.observer&&i.observer.disconnect();const e=document.getElementById("spendguard-cooldown-overlay");e&&e.remove();const t=document.getElementById("spendguard-savings-widget");t&&t.remove();const n=document.getElementById("spendguard-savings-modal");n&&n.remove()}}))})();